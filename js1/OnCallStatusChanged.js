var _0x1ea8=['\x20-\x20destination:\x20','&ticket=','/api/v2/users/','NameContact','\x20lastTicket:\x20','&destination=','Outbound\x20-\x20Ringing\x20-\x20checkevent:\x20','then','user_fields','&contact=','Outbound','Contact','status','CreatedTicketByContactNew\x20error:\x20','\x20\x20checklastticket:\x20','getItem','State','lastTicket:\x20','SendRequestEndCall:\x20result:\x20','.json','Incoming','Sorry,\x20your\x20browser\x20does\x20not\x20support\x20Web\x20Storage...','user','CallID','\x20-\x20ticket:\x20','#contactName','send','\x20destination3cxCurrent:\x20','callInfo','SessionTicket:\x20','querySelector','\x20recordticket2:\x20','log','SendRequestEndCall\x20-\x20\x20phone:\x20','IsMuted','setItem','lastTicket','Goi\x20ra\x20reng\x20chuong','readyState','end\x20call\x20\x20checkevent:\x20','SessionAppRestart:\x20Restart\x20Session','checkLastTicket','checklastticket','bien\x20data:\x20','Loading...','SendRequestEndCall\x20-\x20\x20domainservice3CX:\x20','textContent','GET','OtherPartyNumber','extensionNum','SessionAppRestart:\x20Sorry,\x20your\x20browser\x20does\x20not\x20support\x20Web\x20Storage...','\x20lasticket:\x20','SessionAppGetIdTicket:\x20','OtherPartyName','Inbound\x20-\x20Ringing\x20-\x20checkevent:\x20','Inbound','onreadystatechange','Unknown','message','stringify','request','Kết\x20quả\x20tìm\x20idticket:\x20','Ended_3CX\x20phone3cxCurrent:','SessionAppGetIdTicket\x20lastTicket:\x20','SessionAppRestart:\x20checkLastTicket\x20','{\x22type\x22:\x22DropCall\x22,\x22callId\x22:\x22','&extension=','responseText','Endcall\x20-\x20checkevent:\x20','forEach','GetInformationUser\x20error:\x20','\x20-\x20extension:\x20','undefined','json'];(function(_0x2a42ce,_0x1ea8d4){var _0x3d8072=function(_0x3bff66){while(--_0x3bff66){_0x2a42ce['push'](_0x2a42ce['shift']());}};_0x3d8072(++_0x1ea8d4);}(_0x1ea8,0x115));var _0x3d80=function(_0x2a42ce,_0x1ea8d4){_0x2a42ce=_0x2a42ce-0x0;var _0x3d8072=_0x1ea8[_0x2a42ce];return _0x3d8072;};var currentCall=undefined,destinationCall3CX=null,checkevent=![],recordticket3=undefined,phone3cxCurrent=undefined,destination3cxCurrent=undefined;function NhanSuKienOnCallStatusChanged(_0x3bff66){currentCall=_0x3bff66[_0x3d80('0x2f')],ChangeIsHold(currentCall['IsHold']),ChangeIsMute(currentCall[_0x3d80('0x35')]);switch(currentCall[_0x3d80('0x23')]){case 0x1:{checkevent=!![],RestartNameCTI(),restartidticket(),WriteLogToClient(_0x3d80('0x49')+checkevent+_0x3d80('0x32')+recordticket3),StopTalkingWatch(),Ringing_3CX(),SessionAppRestart(),SessionAppStart(),phone3cxCurrent=currentCall[_0x3d80('0x43')],destination3cxCurrent=_0x3d80('0x0');break;}case 0x2:{console[_0x3d80('0x33')](_0x3d80('0x38')),checkevent=!![],restartidticket(),WriteLogToClient(_0x3d80('0x19')+checkevent+_0x3d80('0x32')+recordticket3),StopTalkingWatch(),Dialing_3CX(),SessionAppRestart(),SessionAppStart(),phone3cxCurrent=currentCall[_0x3d80('0x43')],destination3cxCurrent=_0x3d80('0x1d');break;}case 0x3:{checkConnect==![]&&(checkConnect=!![],Connected_3CX(),StartTalkingWatch(),phone3cxCurrent=currentCall['OtherPartyNumber'],currentCall[_0x3d80('0x27')]?destination3cxCurrent=_0x3d80('0x0'):destination3cxCurrent=_0x3d80('0x1d'));break;}case 0x4:{break;}case 0x5:{TryingToTransfer_3CX();break;}case 0x6:{console[_0x3d80('0x33')](_0x3d80('0x3a')+checkevent),checkConnect=![],checkEndCallCTI=!![],WriteLogToClient(_0x3d80('0xd')+checkevent+_0x3d80('0x32')+recordticket3);checkevent==!![]&&(Ended_3CX(),StopTalkingWatch());RestartNameCTI(),restartidticket(),checkevent=![],phone3cxCurrent=null,destination3cxCurrent=null;break;}default:break;}}function Ringing_3CX(){if(currentCall){let _0x21c8aa=_0x3d80('0x2');!currentCall[_0x3d80('0x48')]?currentCall[_0x3d80('0x48')]=_0x3d80('0x2'):_0x21c8aa=_0x3d80('0x1e');if(!currentCall[_0x3d80('0x43')])currentCall[_0x3d80('0x43')]='';HideAll(),ShowIncommingPhone(),SetIncommingCallPhoneInfo(currentCall['OtherPartyName'],_0x21c8aa,currentCall[_0x3d80('0x43')]),ShowCTI(),destinationCall3CX=_0x3d80('0x0');}}function Dialing_3CX(){if(currentCall){if(!currentCall[_0x3d80('0x48')])currentCall['OtherPartyName']=_0x3d80('0x2');if(!currentCall[_0x3d80('0x43')])currentCall[_0x3d80('0x43')]='';HideAll(),ShowTalkingPhone(),SetTalkingPhoneInfo(currentCall[_0x3d80('0x48')],currentCall[_0x3d80('0x43')]),DisableAllTalkingSmallButton(),ShowCTI(),destinationCall3CX=_0x3d80('0x1d');}}function TryingToTransfer_3CX(){currentCall&&ws[_0x3d80('0x2d')](_0x3d80('0xa')+currentCall[_0x3d80('0x2a')]+'\x22}');}function Connected_3CX(){if(!currentCall['OtherPartyName'])currentCall['OtherPartyName']=_0x3d80('0x2');if(!currentCall['OtherPartyNumber'])currentCall[_0x3d80('0x43')]='';HideAll(),ShowTalkingPhone(),SetTalkingPhoneInfo(currentCall[_0x3d80('0x48')],currentCall[_0x3d80('0x43')]),EnableAllTalkingButtons(),ShowCTI(),currentCall[_0x3d80('0x27')]?PopupTicket(currentCall[_0x3d80('0x43')],'Inbound'):PopupTicket(currentCall[_0x3d80('0x43')],_0x3d80('0x1d'));}function Ended_3CX(){HideCTI(),HideAll(),ShowAvailablePhone(),console[_0x3d80('0x33')]('Ended_3CX\x20'+recordticket3+'\x20');if(phone3cxCurrent){console[_0x3d80('0x33')](_0x3d80('0x7')+phone3cxCurrent+_0x3d80('0x2e')+destination3cxCurrent);var _0x5e2b23=phone3cxCurrent,_0x334eb3=destination3cxCurrent;XuLyEndCall3(_0x5e2b23,_0x334eb3);}currentCall=undefined;}function RestartNameCTI(){document['getElementsByName'](_0x3d80('0x16'))[_0x3d80('0xe')](_0x39a6e2=>{_0x39a6e2['innerText']=_0x3d80('0x3f');}),incommingCallPhoneTop[_0x3d80('0x31')](_0x3d80('0x2c'))[_0x3d80('0x41')]='Loading...',talkingPhoneTop[_0x3d80('0x31')](_0x3d80('0x2c'))[_0x3d80('0x41')]=_0x3d80('0x3f');}function restartidticket(){recordticket3=undefined;}function XuLyEndCall(_0x28e545,_0xfd095b){client[_0x3d80('0x5')](_0x3d80('0x15')+idUserZendesk+_0x3d80('0x26'))[_0x3d80('0x1a')](function(_0x348229){console['log'](_0x3d80('0x3e')+_0x348229);if(_0x348229){if(_0x348229['user']){console[_0x3d80('0x33')]('\x20result:\x20id:\x20'+_0x348229['user']['id']+_0x3d80('0x21')+_0x348229[_0x3d80('0x29')][_0x3d80('0x1b')][_0x3d80('0x3d')]+_0x3d80('0x46')+_0x348229[_0x3d80('0x29')][_0x3d80('0x1b')]['lastticket']);if(_0x348229[_0x3d80('0x29')][_0x3d80('0x1b')]){var _0x1ef6e4=_0x348229[_0x3d80('0x29')][_0x3d80('0x1b')]['lastticket'];console[_0x3d80('0x33')](_0x3d80('0x24')+_0x1ef6e4),_0x1ef6e4?GetLogCallNew(_0x1ef6e4,_0x28e545,_0xfd095b):CreatedTicketByContact2(_0x28e545,idContactZendesk,_0xfd095b,_0x1f5135=>{console[_0x3d80('0x33')](_0x3d80('0x6')+_0x1f5135),GetLogCallNew(_0x1f5135,_0x28e545,_0xfd095b),PopupTicketFD(_0x1f5135);}),UpdateCheckLastTicket(![]);}}}},function(_0x15e51b){console[_0x3d80('0x33')](_0x3d80('0xf')+_0x15e51b),console[_0x3d80('0x33')](JSON['stringify'](_0x15e51b));});}function XuLyEndCall2(_0x5999a5,_0x380f95){SessionAppGetIdTicket(_0x23e055=>{console[_0x3d80('0x33')]('SessionAppGetIdTicket\x20lastTicket:\x20'+_0x23e055),_0x23e055?(console[_0x3d80('0x33')](null),GetLogCallNew(_0x23e055,_0x5999a5,_0x380f95)):CreatedTicketByContact2(_0x5999a5,idContactZendesk,_0x380f95,_0x5c0d29=>{console[_0x3d80('0x33')](_0x3d80('0x6')+_0x5c0d29),GetLogCallNew(_0x5c0d29,_0x5999a5,_0x380f95),PopupTicketFD(_0x5c0d29);});});}function XuLyEndCall3(_0x1f0e80,_0x54b93d){SessionAppGetIdTicket(_0x4a99ca=>{console['log'](_0x3d80('0x8')+_0x4a99ca);var _0x5b3d9e=null;_0x4a99ca=='0'?_0x5b3d9e=0x0:_0x5b3d9e=_0x4a99ca,SendRequestEndCall(_0x1f0e80,window[_0x3d80('0x44')],_0x54b93d,_0x5b3d9e,idContactZendesk);});}function UpdateCheckLastTicket(_0x2cbd24){var _0x18adeb={'contentType':'application/json','data':JSON[_0x3d80('0x4')]({'user':{'user_fields':{'checklastticket':_0x2cbd24,'lasticket':null}}}),'dataType':_0x3d80('0x12'),'method':'PUT','url':_0x3d80('0x15')+idUserZendesk+_0x3d80('0x26')};client[_0x3d80('0x5')](_0x18adeb)[_0x3d80('0x1a')](function(_0x182139){console[_0x3d80('0x33')](_0x3d80('0x3e')+_0x182139);if(_0x182139){}},function(_0x3904b1){console[_0x3d80('0x33')](_0x3d80('0x20')+_0x3904b1),console[_0x3d80('0x33')](JSON['stringify'](_0x3904b1));});}function SessionAppGetIdTicket(_0x3bb9ed){var _0x22b842=null;try{if(typeof Storage!=='undefined'){var _0x46a84e=sessionStorage[_0x3d80('0x22')](_0x3d80('0x3c'));_0x46a84e&&(_0x22b842=sessionStorage[_0x3d80('0x22')](_0x3d80('0x37')),console[_0x3d80('0x33')](_0x3d80('0x30')+_0x22b842),sessionStorage[_0x3d80('0x36')](_0x3d80('0x3c'),![]));}else console[_0x3d80('0x33')](_0x3d80('0x28'));}catch(_0x2d044f){console[_0x3d80('0x33')](_0x3d80('0x47')+_0x2d044f[_0x3d80('0x3')]);}SessionAppRestart(),_0x3bb9ed(_0x22b842);}function SessionAppStart(){try{typeof Storage!==_0x3d80('0x11')?(sessionStorage['setItem'](_0x3d80('0x3c'),!![]),console[_0x3d80('0x33')](_0x3d80('0x3b'))):console[_0x3d80('0x33')](_0x3d80('0x45'));}catch(_0xcf423e){console['log'](_0x3d80('0x47')+_0xcf423e[_0x3d80('0x3')]);}}function SessionAppRestart(){try{typeof Storage!==_0x3d80('0x11')?(sessionStorage['setItem'](_0x3d80('0x3c'),![]),sessionStorage[_0x3d80('0x36')](_0x3d80('0x37'),'0'),console[_0x3d80('0x33')](_0x3d80('0x3b')),console[_0x3d80('0x33')](_0x3d80('0x9')+sessionStorage[_0x3d80('0x22')](_0x3d80('0x3c'))+_0x3d80('0x17')+sessionStorage[_0x3d80('0x22')](_0x3d80('0x37')))):console[_0x3d80('0x33')](_0x3d80('0x45'));}catch(_0x3e4144){console['log'](_0x3d80('0x47')+_0x3e4144['message']);}}function SendRequestEndCall(_0x3e575e,_0x3f2a8f,_0x4d03fd,_0x31e4c1,_0x47f169){console['log'](_0x3d80('0x34')+_0x3e575e+_0x3d80('0x10')+_0x3f2a8f+_0x3d80('0x13')+_0x4d03fd+_0x3d80('0x2b')+_0x31e4c1+'\x20-\x20contact:\x20'+_0x47f169+'\x20\x20');var _0x438ab4=new XMLHttpRequest();_0x438ab4[_0x3d80('0x1')]=function(){this[_0x3d80('0x39')]==0x4&&this[_0x3d80('0x1f')]==0xc8&&console[_0x3d80('0x33')](_0x3d80('0x25')+this[_0x3d80('0xc')]);};var _0x413255=domainservice+('/PBX/EndCall?phone='+_0x3e575e+_0x3d80('0xb')+_0x3f2a8f+_0x3d80('0x18')+_0x4d03fd+_0x3d80('0x14')+_0x31e4c1+_0x3d80('0x1c')+_0x47f169);console[_0x3d80('0x33')](_0x3d80('0x40')+_0x413255+'\x20'),_0x438ab4['open'](_0x3d80('0x42'),_0x413255,!![]),_0x438ab4[_0x3d80('0x2d')]();}