var _0x3b58=['[Inbound]\x20Ticket\x20for\x20Call(cloud\x20based)\x20','Ext.','soNhan','thoiGianBatDau','vào\x20hàm\x20PopupTicket','request','stringify','GET','FindIdTicketToPopup:\x20phone:\x20','name','json','routeTo','/api/v2/users/','ticket','user','length','invoke','log','ketqua\x20tim\x20voi\x20phone:\x20','duration','#contactName','\x20ticket\x20create\x20với\x20id\x20:\x20','FindIdContactByPhoneType:\x20phone:\x20','CreateContactWithPhoneOld\x20error:\x20','GetLogCallNew\x20-\x20\x20domainservice3CX:\x20','\x20Contact\x20create\x20với\x20id\x20:\x20','readyState','[Outbound]\x20Ticket\x20for\x20Call(cloud\x20based)\x20','\x20phone:','DD/MM/YYYY\x20HH:mm:ss','onreadystatechange','CreateContactWithPhoneOld:\x20\x20phone:\x20','textContent','CreateContactWithPhoneOld:\x20data\x20','forEach','YYYY-MM-DDTHH:mm:ss','recording_url','format','chuẩn\x20bị\x20vào\x20hàm\x20tạo\x20contact\x20mới','status','bien\x20data:\x20','POST','then','Kết\x20quả\x20tìm\x20idcontact:\x20','call_channel','không\x20thấy\x20số\x20điện\x20thoại:\x20','thoiGianNoiChuyen','application/json','currentUser','.json','get','/api/v2/tickets/','tim\x20kiem\x20contact:\x20\x20phone:\x20','replace','GetLogCall:\x20result:\x20','Kết\x20quả\x20tìm\x20idticket:\x20','/api/v2/users/autocomplete.json?phone=','querySelector','\x20chieugoi:\x20','CreatedTicketByContactNew\x20error:\x20','send','users','vào\x20hàm\x20PopupContact','PUT','CreatedTicketByContactNew\x20--\x20idcontact:\x20','GetLogCall\x20-\x20\x20phone111:\x20','Trạng\x20thái:\x20','NameContact','open','/api/v2/tickets.json','recording','\x20-\x20chieugoi111:\x20','Iduser:\x20','None','responseText','parse'];(function(_0x25f90e,_0x3b585e){var _0x376bd6=function(_0x262e3a){while(--_0x262e3a){_0x25f90e['push'](_0x25f90e['shift']());}};_0x376bd6(++_0x3b585e);}(_0x3b58,0x103));var _0x376b=function(_0x25f90e,_0x3b585e){_0x25f90e=_0x25f90e-0x0;var _0x376bd6=_0x3b58[_0x25f90e];return _0x376bd6;};var recordticket=undefined,idContactZendesk=null;function FindIdContactByPhoneTypeOld(_0x262e3a,_0x31d384){console[_0x376b('0x3e')](_0x376b('0x0')+_0x262e3a);var _0x1d8ef4=undefined;return _0x262e3a!=''&&client[_0x376b('0x32')](_0x376b('0x19')+_0x262e3a)['then'](function(_0xefd399){console['log'](_0x376b('0x2')+_0xefd399),_0xefd399!=null&&_0xefd399['users'][_0x376b('0x3c')]>0x0?(_0x1d8ef4=_0xefd399[_0x376b('0x1e')][0x0]['id'],console[_0x376b('0x3e')]('Tạo\x20Contact\x20với\x20id\x20:\x20'+_0x1d8ef4),_0x31d384(_0x1d8ef4)):_0x31d384(null);},function(_0x2249b0){console['log'](JSON[_0x376b('0x33')](_0x2249b0)),_0x31d384(null);}),_0x1d8ef4;}function FindIdContactByPhone(_0x2ba1cf,_0x1f2f94){_0x2ba1cf!==''&&_0x2ba1cf[_0x376b('0x3c')]>0x0&&FindIdContactByPhoneTypeOld(_0x2ba1cf,_0x33f98f=>{console[_0x376b('0x3e')](_0x376b('0x3f')+_0x33f98f),_0x33f98f===null||_0x33f98f===0x0?(console['log'](_0x376b('0x7')),_0x33f98f=CreateContactWithPhoneOld(_0x2ba1cf,_0x277681=>{console[_0x376b('0x3e')]('ketqua\x20tao\x20contact:\x20'+_0x277681),_0x277681===null||_0x277681===0x0?_0x1f2f94(null):_0x1f2f94(_0x277681);})):_0x1f2f94(_0x33f98f);});}function CreateContactWithPhoneOld(_0x55f092,_0x31dc0f){console['log'](_0x376b('0x43')+_0x55f092);var _0x22c4b6=0x0;if(_0x55f092!=''&&_0x55f092['length']>0x0){var _0xd256bc={'contentType':_0x376b('0x10'),'data':JSON[_0x376b('0x33')]({'user':{'name':'[CALL]\x20New\x20Contact\x20'+_0x55f092,'phone':_0x55f092}}),'dataType':_0x376b('0x37'),'method':'POST','url':'/api/v2/users.json'};client[_0x376b('0x32')](_0xd256bc)[_0x376b('0xb')](function(_0x343034){console[_0x376b('0x3e')](_0x376b('0x9')+_0x343034),_0x343034!=null&&_0x343034[_0x376b('0x3b')]!=null?(_0x22c4b6=_0x343034[_0x376b('0x3b')]['id'],console['log'](_0x376b('0x46')+_0x22c4b6),_0x31dc0f(_0x22c4b6)):_0x31dc0f(null);},function(_0x1ed2b1){console[_0x376b('0x3e')](_0x376b('0x44')+_0x1ed2b1),console[_0x376b('0x3e')](JSON[_0x376b('0x33')](_0x1ed2b1)),_0x31dc0f(null);});}}function FindIdTicketToPopup(_0x285ba5,_0x382db4,_0x1d3618){console[_0x376b('0x3e')](_0x376b('0x35')+_0x285ba5+'\x20chieugoi:\x20'+_0x382db4),_0x285ba5!=''&&_0x285ba5[_0x376b('0x3c')]>0x0?FindIdContactByPhone(_0x285ba5,_0x4f1205=>{console[_0x376b('0x3e')](_0x376b('0xc')+_0x4f1205),UpdateName(_0x4f1205),CreatedTicketByContactNew(_0x285ba5,_0x4f1205,_0x382db4,_0x4b6f6b=>{console[_0x376b('0x3e')](_0x376b('0x18')+_0x4b6f6b),_0x1d3618(_0x4b6f6b);});}):console[_0x376b('0x3e')](_0x376b('0xe'));}function FindIdContactToPopup(_0x5c5abe,_0x371669,_0x38c312){console[_0x376b('0x3e')](_0x376b('0x35')+_0x5c5abe+_0x376b('0x1b')+_0x371669),_0x5c5abe!=''&&_0x5c5abe['length']>0x0?FindIdContactByPhone(_0x5c5abe,_0x3ee165=>{console[_0x376b('0x3e')](_0x376b('0xc')+_0x3ee165),UpdateName(_0x3ee165),_0x38c312(_0x3ee165);}):console['log'](_0x376b('0xe'));}function getIdUser(){client[_0x376b('0x13')](_0x376b('0x11'))[_0x376b('0xb')](_0x3632c5=>idUserZendesk=_0x3632c5[_0x376b('0x11')]['id']);}function CreatedTicketByContactNew(_0xfc42e4,_0x56933d,_0x44fb11,_0x4ed791){console[_0x376b('0x3e')](_0x376b('0x21')+_0x56933d+_0x376b('0x1b')+_0x44fb11);var _0x395611=undefined;console[_0x376b('0x3e')](_0x376b('0x29')+idUserZendesk);if(_0x56933d!=''){var _0x267fc6='',_0x9c82af=moment()[_0x376b('0x6')]('DD/MM/YYYY\x20HH:mm:ss'),_0x32069e=_0x376b('0xd');_0x44fb11=='Inbound'?_0x267fc6=_0x376b('0x2d')+_0x9c82af:(_0x267fc6=_0x376b('0x48')+_0x9c82af,_0x32069e='outbound_channel');var _0x51b9a7={'contentType':_0x376b('0x10'),'data':JSON[_0x376b('0x33')]({'ticket':{'subject':_0x267fc6,'requester_id':_0x56933d,'is_public':![],'comment':{'body':_0x267fc6},'custom_fields':[{'id':0x53d1f81ab0,'value':_0x32069e}],'assignee_id':idUserZendesk}}),'dataType':_0x376b('0x37'),'method':_0x376b('0xa'),'url':_0x376b('0x26')};client[_0x376b('0x32')](_0x51b9a7)[_0x376b('0xb')](function(_0x2d3da7){console[_0x376b('0x3e')](_0x376b('0x9')+_0x2d3da7),_0x2d3da7!=null&&_0x2d3da7[_0x376b('0x3a')]!=null?(_0x395611=_0x2d3da7[_0x376b('0x3a')]['id'],console[_0x376b('0x3e')](_0x376b('0x42')+_0x2d3da7[_0x376b('0x3a')]['id']),_0x4ed791(_0x395611)):_0x4ed791(null);},function(_0x3963e6){console[_0x376b('0x3e')]('CreatedTicketByContactNew\x20error:\x20'+_0x3963e6),console[_0x376b('0x3e')](JSON[_0x376b('0x33')](_0x3963e6)),_0x4ed791(null);});}return _0x395611;}function CreatedTicketByContact2(_0x484ce1,_0xee381a,_0x4c3149,_0x457bbe){console[_0x376b('0x3e')](_0x376b('0x21')+_0xee381a+_0x376b('0x1b')+_0x4c3149+_0x376b('0x49')+_0x484ce1);var _0x32e459=undefined;console[_0x376b('0x3e')](_0x376b('0x29')+idUserZendesk);if(_0xee381a!=''){var _0x3a5b8e='',_0x21600e=moment()[_0x376b('0x6')](_0x376b('0x4a'));_0x4c3149=='Inbound'?_0x3a5b8e=_0x376b('0x2d')+_0x21600e:_0x3a5b8e='[Outbound]\x20Ticket\x20for\x20Call(cloud\x20based)\x20'+_0x21600e;var _0xc6b345={'contentType':'application/json','data':JSON[_0x376b('0x33')]({'ticket':{'subject':_0x3a5b8e,'requester_id':_0xee381a,'is_public':![],'comment':{'body':_0x3a5b8e},'assignee_id':idUserZendesk}}),'dataType':'json','method':_0x376b('0xa'),'url':_0x376b('0x26')};client[_0x376b('0x32')](_0xc6b345)[_0x376b('0xb')](function(_0x5512e0){console['log'](_0x376b('0x9')+_0x5512e0),_0x5512e0!=null&&_0x5512e0[_0x376b('0x3a')]!=null?(_0x32e459=_0x5512e0[_0x376b('0x3a')]['id'],console[_0x376b('0x3e')](_0x376b('0x42')+_0x5512e0['ticket']['id']),_0x457bbe(_0x32e459)):_0x457bbe(null);},function(_0x3cf2bb){console[_0x376b('0x3e')](_0x376b('0x1c')+_0x3cf2bb),console[_0x376b('0x3e')](JSON[_0x376b('0x33')](_0x3cf2bb)),_0x457bbe(null);});}return _0x32e459;}function PopupContact(_0xdb5962,_0x90868f){console['log'](_0x376b('0x1f')),FindIdContactToPopup(_0xdb5962,_0x90868f,_0x54068f=>{_0x54068f!==null&&_0x54068f!==0x0&&(idContactZendesk=_0x54068f,PopupContactZD(_0x54068f));});}function PopupTicket(_0x3cead0,_0x5a5403){console[_0x376b('0x3e')](_0x376b('0x31')),FindIdTicketToPopup(_0x3cead0,_0x5a5403,_0x1b50c5=>{_0x1b50c5!==null&&_0x1b50c5!==0x0&&(console[_0x376b('0x3e')]('idticket:\x20'+_0x1b50c5),recordticket=_0x1b50c5,PopupTicketFD(_0x1b50c5));});}function PopupTicketFD(_0x46ccdc){client['invoke'](_0x376b('0x38'),'ticket',_0x46ccdc);}function PopupContactZD(_0x32637d){client[_0x376b('0x3d')](_0x376b('0x38'),_0x376b('0x3b'),_0x32637d);}function UpdateName(_0x1a06f7){console['log'](_0x376b('0x15')+_0x1a06f7),_0x1a06f7!=''&&client[_0x376b('0x32')](_0x376b('0x39')+_0x1a06f7+_0x376b('0x12'))[_0x376b('0xb')](function(_0x44e5db){console['log']('UpdateName:\x20data\x20'+_0x44e5db),_0x44e5db!=null&&_0x44e5db[_0x376b('0x3b')]!=null&&(console[_0x376b('0x3e')]('name\x20Contact\x20với\x20tim\x20kiem\x20:\x20'+_0x44e5db['user']['name']),document['getElementsByName'](_0x376b('0x24'))[_0x376b('0x3')](_0x4a8179=>{_0x4a8179['innerText']=_0x44e5db[_0x376b('0x3b')]['name'];}),incommingCallPhoneTop[_0x376b('0x1a')](_0x376b('0x41'))['textContent']=_0x44e5db[_0x376b('0x3b')]['name'],talkingPhoneTop[_0x376b('0x1a')](_0x376b('0x41'))[_0x376b('0x1')]=_0x44e5db[_0x376b('0x3b')][_0x376b('0x36')]);},function(_0x27fda1){console[_0x376b('0x3e')](JSON[_0x376b('0x33')](_0x27fda1));});}function GetLogCallNew(_0x552321,_0x198596,_0x1c5217){console[_0x376b('0x3e')](_0x376b('0x22')+_0x198596+_0x376b('0x28')+_0x1c5217+'\x20');var _0x5f04ae=new XMLHttpRequest();_0x5f04ae[_0x376b('0x4b')]=function(){if(this[_0x376b('0x47')]==0x4&&this[_0x376b('0x8')]==0xc8){console['log'](_0x376b('0x17')+this[_0x376b('0x2b')]);var _0x57a9e4=JSON[_0x376b('0x2c')](this['responseText']);if(_0x57a9e4){var _0x94ee3={'from':_0x57a9e4['soGoi'][_0x376b('0x16')](_0x376b('0x2e'),''),'to':_0x57a9e4[_0x376b('0x2f')][_0x376b('0x16')](_0x376b('0x2e'),''),'started_at':moment(_0x57a9e4[_0x376b('0x30')])[_0x376b('0x6')](_0x376b('0x4')),'call_duration':moment[_0x376b('0x40')](_0x57a9e4[_0x376b('0xf')])['asSeconds'](),'transcription_text':_0x376b('0x23')+_0x57a9e4['trangThai']};_0x57a9e4[_0x376b('0x27')]!=_0x376b('0x2a')&&(_0x94ee3[_0x376b('0x5')]=_0x57a9e4[_0x376b('0x27')]),AddLogCall(_0x552321,_0x94ee3);}}};var _0x18ecdd=domainservice+('/PBX/GetRecordingFileGhiAm?sodienthoai='+_0x198596+'&chieugoi='+_0x1c5217);console[_0x376b('0x3e')](_0x376b('0x45')+_0x18ecdd+'\x20'),_0x5f04ae[_0x376b('0x25')](_0x376b('0x34'),_0x18ecdd,!![]),_0x5f04ae[_0x376b('0x1d')]();}function AddLogCall(_0x2de6b9,_0x395624){if(_0x2de6b9){var _0x4a12f0={'contentType':_0x376b('0x10'),'data':JSON['stringify']({'ticket':{'voice_comment':_0x395624}}),'dataType':_0x376b('0x37'),'method':_0x376b('0x20'),'url':_0x376b('0x14')+_0x2de6b9+_0x376b('0x12')};client[_0x376b('0x32')](_0x4a12f0)[_0x376b('0xb')](function(_0x5e7acc){console[_0x376b('0x3e')](_0x376b('0x9')+_0x5e7acc);},function(_0x1e8d68){console[_0x376b('0x3e')](_0x376b('0x1c')+_0x1e8d68);});}}